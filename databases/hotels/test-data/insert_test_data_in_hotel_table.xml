<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">

    <changeSet id="test_data_hotel" author="shurapilipuk@gmail.com">
        <sql>
            INSERT INTO hotel.dict_countries (id, country, active, created, updated)
            SELECT
            gs AS id,
            CONCAT('Country', gs) AS country,
            true AS active,
            NOW() AT TIME ZONE 'utc' - (random() * interval '365 days'),
            NOW() AT TIME ZONE 'utc'
            FROM generate_series(1, 10000) AS gs;
        </sql>

        <sql>
            INSERT INTO hotel.dict_cities (id, city, country_id, active, created, updated)
            SELECT
            gs AS id,
            CONCAT('City', gs) AS city,
            gs AS country_id,
            true AS active,
            NOW() AT TIME ZONE 'utc' - (random() * interval '365 days'),
            NOW() AT TIME ZONE 'utc'
            FROM generate_series(1, 10000) AS gs;
        </sql>

        <sql>
            <![CDATA[
            INSERT INTO hotel.addresses (id, street, house_number, country_id, city_id, active, created, updated)
            SELECT
            gs AS id,
            CASE
                WHEN random() < 0.5 THEN 'Zhilunovicha'
                ELSE 'Polessia'
            END AS street,
            CONCAT(gs, 'a') AS house_number,
            gs AS country_id,
            gs AS city_id,
            true AS active,
            NOW() AT TIME ZONE 'utc' - (random() * interval '365 days'),
            NOW() AT TIME ZONE 'utc'
            FROM generate_series(1, 10000) AS gs;
            ]]>
        </sql>

        <sql>
            <![CDATA[
            INSERT INTO hotel.hotels (id, name, rating, address_id, active, created, updated)
            SELECT
            gs AS id,
            CONCAT('Hotel', gs) AS name,
            CASE
                WHEN random() < 0.5 THEN 5
                ELSE 4
            END AS rating,
            gs AS address_id,
            true AS active,
            NOW() AT TIME ZONE 'utc' - (random() * interval '365 days'),
            NOW() AT TIME ZONE 'utc'
            FROM generate_series(1, 10000) AS gs;
            ]]>
        </sql>

        <sql>
            <![CDATA[
            INSERT INTO hotel.room_types (id, room_type, active, created, updated)
            SELECT
            gs AS id,
            CASE
                WHEN gs = 1 THEN 'Lux'
                ELSE 'Standart'
            END AS room_type,
            true AS active,
            NOW() AT TIME ZONE 'utc' - (random() * interval '365 days'),
            NOW() AT TIME ZONE 'utc'
            FROM generate_series(1, 2) AS gs;
            ]]>
        </sql>

        <sql>
            <![CDATA[
            INSERT INTO hotel.rooms (id, description, room_type_id, hotel_id, active, created, updated)
            SELECT
            gs AS id,
            CONCAT('Room ', gs, ' in hotel', gs) AS description,
            CASE
                WHEN random() < 0.5 THEN 1
                ELSE 2
            END AS room_type_id,
            gs AS hotel_id,
            true AS active,
            NOW() AT TIME ZONE 'utc' - (random() * interval '365 days'),
            NOW() AT TIME ZONE 'utc'
            FROM generate_series(1, 10000) AS gs;
            ]]>
        </sql>

    </changeSet>
</databaseChangeLog>